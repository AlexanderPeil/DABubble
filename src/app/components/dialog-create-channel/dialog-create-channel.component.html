<div class="padding" *ngIf="showForm">
  <div class="dialogHead">
    <p>Create new Channel</p>
    <div class="closeIconContainer">
      <img mat-dialog-close src="assets/img/icons/closeIcon.svg" />
    </div>
  </div>

  <p class="textContainer">
    Channels are used by your team to communicate. They should ideally be themed
    #marketing for example
  </p>

  <div class="inputHeadAndContainer">
    <p>Channel-Name</p>
    <div class="FirstInputContainer">
      <img src="./assets/img/icons/hashtag.svg" alt="" />
      <input
        (ngModelChange)="
          getValueForChannelNameAndConvertToLowerCase(channel.channelName)
        "
        [(ngModel)]="channel.channelName"
        type="text"
        placeholder="e.g. Marketing"
      />
    </div>
  </div>

  <div class="inputHeadAndContainer">
    <p>Description (optional)</p>
    <div class="FirstInputContainer">
      <input
        [(ngModel)]="channel.channelDescription"
        name="channelDescription"
        type="text"
        placeholder="Write your text here"
      />
    </div>
  </div>

  <div class="btnContainer">
    <button
      [ngClass]="{ btnDisabled: channel.channelName.length == 0 }"
      [disabled]="channel.channelName.length == 0"
      (click)="toggleForms()"
      mat-button
    >
      Create
    </button>
  </div>
</div>

<form *ngIf="!showForm" type="submit">
  <div class="dialogContainer">
    <div class="dialogHead">
      <p>Add Members</p>
      <div class="closeIconContainer">
        <img mat-dialog-close src="assets/img/icons/closeIcon.svg" />
      </div>
    </div>

    <mat-radio-group
      class="flex-column"
      aria-label="Select an option"
      (change)="onRadioChange($event)"
    >
      <mat-radio-button color="primary" value="1" (click)="addAllMembers()"
        >Alle Mitglieder hinzufügen</mat-radio-button
      >
      <mat-radio-button color="primary" value="2"
        >Bestimmte Leute hinzufügen</mat-radio-button
      >
    </mat-radio-group>
    <div class="inputContainer" [class.hiddenInputContainer]="!isInputVisible">
      <input
        name="addMember"
        type="text"
        placeholder="Write Name"
        autocomplete="off"
        (click)="checkForDropdown($event)"
        (input)="checkForDropdown($event)"
      />
      <div *ngIf="selectedUsers.length > 0" class="selected-users">
        <div *ngFor="let user of selectedUsers" class="selected-user">
          <img [src]="user.photoURL" />
          <span>{{ user.displayName }}</span>
        </div>
      </div>
    </div>
    <div *ngIf="showUserDropdown" class="user-dropdown">
      <div *ngFor="let user of foundUsers" (click)="selectUser(user)">
        <img [src]="user.photoURL" />
        <span>{{ user.displayName }}</span>
      </div>
    </div>

    <div class="btnContainer">
      <button
        type="submit"
        mat-button
        mat-dialog-close
        [ngClass]="{ btnDisabled: !radioSelected }"
        [disabled]="!radioSelected"
        (click)="onSubmitWithMembers(channel)"
      >
        Create
      </button>
    </div>
  </div>
</form>
